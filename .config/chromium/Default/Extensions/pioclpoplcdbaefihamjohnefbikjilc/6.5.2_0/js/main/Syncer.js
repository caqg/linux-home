/*! Copyright 2009-2015 Evernote Corporation. All rights reserved. */
function Syncer(a,b,c,d,e,f,g){"use strict";function h(a){q.push(a),o(a[e]),i()}function i(){for(var b={},c=0;c<d.length;c++){var e=d[c].name,f=Persistent.get(e);f||(f={}),f[a]||(f[a]={});for(var g=0;g<q.length;g++){var h=q[g][e];if(h)for(var i=0;i<h.length;i++){for(var j=h[i],k=0;k<d[c].idPropertyChain.length;k++)j=j[d[c].idPropertyChain[k]];if(f[a][j]=d[c].updateItem(f[a][j],h[i]),d[c].extraHandling){var l=d[c].extraHandling(f[a][j],b);for(var m in l)if("item"===m)l.item?f[a][j]=l.item:delete f[a][j];else{var n=Persistent.get(m);n[a]=l[m],Persistent.set(m,n)}}}}b[e]=f[a],Persistent.set(e,f)}q=[],r()}function j(){return b}function k(){var b=Persistent.get(c+"USN");return b&&b[a]?b[a]:0}function l(a){a[e]?(q.push(a),o(a[e]),a[e]<a[f]?p():i()):i()}function m(a){console.log(a)}function n(a){r=a}function o(b){var d=Persistent.get(c+"USN");d||(d={}),d[a]=b,Persistent.set(c+"USN",d)}function p(){g(k(),l,m)}var q=[],r=null;this.applySyncChunk=h,this.getAuthToken=j,this.setSyncCompleteHandler=n,this.sync=p,Object.preventExtensions(this)}Object.preventExtensions(Syncer);