function HeroNoteSnippets(n,p,r,s,t){function u(a){var h=navigator.language,e="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),c=new Date;if(a.getMonth()===c.getMonth()&&a.getDate()===c.getDate()&&a.getFullYear()===c.getFullYear())return Browser.i18n.getMessage("Today");if(6048E5>=c.valueOf()-a.valueOf()&&c.getDay()!==a.getDay())return Browser.i18n.getMessage(e[a.getDay()]);e="%day %monthName %year";c=a.getDate();h.match(/en-us/i)&&(e="%monthName %day, %year",c=1==c||21==c||31==
c?c+"st":2==c||22==c?c+"nd":3==c||23==c?c+"rd":c+"th");h.match(/^zh/i)?e="%year\u5e74%month\u6708%day\u65e5":h.match(/^ja/i)&&(e="%year\u5e74%monthName%day\u65e5");e=e.replace(/%day/,c);e=e.replace(/%year/,a.getFullYear());e=e.replace(/%monthName/,Browser.i18n.getMessage("Jan Feb March April May June July Aug Sept Oct Nov Dec".split(" ")[a.getMonth()]));return e=e.replace(/%month/,a.getMonth()+1)}var k={};this.setNotes=function(a,h,e){for(var c=document.createElement("table"),l=null,m=null,b=0;b<
a.length;b++){var f=document.createElement("div");f.classList.add("hnsNote");e&&f.classList.add("hnsGrid");var q=h||0===b||1===b&&2===a.length;if(q){a[b].thumbsquare||(a[b].thumbsquare="/shard/"+a[b].shardId+"/thm/note/"+a[b].guid);var d=document.createElement("div");d.classList.add("hnsThumbContainer");var g=document.createElement("img");Browser.sendToExtension({name:"downloadThumbnail",guid:a[b].guid,inBusinessNotebook:a[b].inBusinessNotebook,size:190,url:p+a[b].thumbsquare});k[a[b].guid]=g;d.appendChild(g);
f.appendChild(d)}d=document.createElement("div");d.classList.add("hnsTitle");d.innerText=a[b].title;d.title=a[b].title;f.appendChild(d);d=document.createElement("div");d.classList.add("hnsDateUrl");g=document.createElement("span");g.classList.add("hnsDate");g.innerText=u(new Date(a[b].updated));d.appendChild(g);a[b].attributes.sourceURL&&(g=document.createElement("a"),g.classList.add("hnsUrl"),g.href=a[b].attributes.sourceURL,g.target="_blank",g.innerText=a[b].attributes.sourceURL.replace(/^https?:\/\/(?:www\.)?(.*?)\/.*/,
"$1"),d.appendChild(g));f.appendChild(d);d=document.createElement("div");d.classList.add("hnsSnippet");d.innerText=a[b].snippet;f.appendChild(d);a[b].notebookName&&(d=document.createElement("div"),d.classList.add("hnsNotebookName"),d.innerText=a[b].notebookName,f.appendChild(d),f.classList.add("hnsHasNotebookName"));f.dataset.guid=a[b].guid;f.dataset.shardId=a[b].shardId;f.dataset.notebookType=a[b].inBusinessNotebook?"business":"personal";f.addEventListener("click",function(a){Browser.sendToExtension({name:"main_recordActivity"});
a.srcElement.classList.contains("hnsUrl")||a.srcElement.classList.contains("hnsNotebookName")||Browser.sendToExtension({name:"main_openWindow",url:GlobalUtils.getNoteURI(p,{noteGuid:this.dataset.guid,shardId:this.dataset.shardId},r,s)});t(this.dataset.notebookType)});f.addEventListener("mouseover",function(a){a.srcElement.classList.contains("hnsUrl")||a.srcElement.classList.contains("hnsNotebookName")||this.classList.add("hnsHover")});f.addEventListener("mouseout",function(a){this.classList.remove("hnsHover")});
if(q||1===b){m=document.createElement("td");m.appendChild(f);if(!l||2<=l.children.length)l=document.createElement("tr"),c.appendChild(l);l.appendChild(m)}else m.appendChild(f)}n.appendChild(c);0===a.length&&(n.dataset.noResult=Browser.i18n.getMessage("noResult"),n.classList.add("noResults"))};Browser.addMessageHandlers({receiveThumbnail:function(a,h,e){k[a.guid]&&(k[a.guid].addEventListener("load",function(){this.style.top=(this.height-144)/-2+"px";this.style.left=(this.width-190)/-2+"px";this.parentNode.parentNode.classList.add("hnsHero")}),
k[a.guid].src=a.datauri,delete k[a.guid])}});Object.preventExtensions(this)}Object.preventExtensions(HeroNoteSnippets);
