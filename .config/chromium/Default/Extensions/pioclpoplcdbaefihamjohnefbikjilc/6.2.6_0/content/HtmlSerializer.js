"undefined"==typeof SAFARI&&(SAFARI=!1);if("undefined"==typeof Browser){Browser={sendToExtension:function(z){window.parent.postMessage(z,"*")}};var msgMap={},msgHandler=function(z){var v=z.data;if(v&&v.name&&msgMap[v.name])msgMap[v.name](z.data)};window.addEventListener("message",msgHandler,!1);Browser.addMessageHandlers=function(z){for(var v in z)msgMap[v]=z[v]}}
function HtmlSerializer(){function z(a,b){b=b.toLowerCase();if(b.match(/^on/i)||b.match(/^data-/i)||-1<ia.indexOf(b))return!1;switch(a){case "a":return-1<d.indexOf(b)||-1<Y.indexOf(b)||-1<"charset coords href hreflang name rel rev shape target type".split(" ").indexOf(b)?!0:!1;case "abbr":return-1<d.indexOf(b)?!0:!1;case "acronym":return-1<d.indexOf(b)?!0:!1;case "address":return-1<d.indexOf(b)?!0:!1;case "area":return-1<d.indexOf(b)||-1<Y.indexOf(b)||-1<"alt coords href nohref shape target".split(" ").indexOf(b)?
!0:!1;case "b":return-1<d.indexOf(b)?!0:!1;case "bdo":return-1<S.indexOf(b)||-1<["dir","lang"].indexOf(b)?!0:!1;case "big":return-1<d.indexOf(b)?!0:!1;case "blockquote":return-1<d.indexOf(b)||-1<["cite"].indexOf(b)?!0:!1;case "br":return-1<S.indexOf(b)||-1<["clear"].indexOf(b)?!0:!1;case "caption":return-1<d.indexOf(b)||-1<["align"].indexOf(b)?!0:!1;case "center":return-1<d.indexOf(b)?!0:!1;case "cite":return-1<d.indexOf(b)?!0:!1;case "code":return-1<d.indexOf(b)?!0:!1;case "col":return-1<d.indexOf(b)||
-1<B.indexOf(b)||-1<["span","valign","width"].indexOf(b)?!0:!1;case "colgroup":return-1<d.indexOf(b)||-1<B.indexOf(b)||-1<["valign"].indexOf(b)?!0:!1;case "dd":return-1<d.indexOf(b)?!0:!1;case "del":return-1<d.indexOf(b)||-1<["cite","datetime"].indexOf(b)?!0:!1;case "dfn":return-1<d.indexOf(b)?!0:!1;case "div":return-1<["evernote_attachment_url","evernote_attachment_name"].indexOf(b)||-1<d.indexOf(b)||-1<["align"].indexOf(b)?!0:!1;case "dl":return-1<d.indexOf(b)||-1<["compact"].indexOf(b)?!0:!1;case "dt":return-1<
d.indexOf(b)?!0:!1;case "em":return-1<d.indexOf(b)?!0:!1;case "font":return-1<S.indexOf(b)||-1<Z.indexOf(b)||-1<["color","face","size"].indexOf(b)?!0:!1;case "h1":return-1<d.indexOf(b)||-1<["align"].indexOf(b)?!0:!1;case "h2":return-1<d.indexOf(b)||-1<["align"].indexOf(b)?!0:!1;case "h3":return-1<d.indexOf(b)||-1<["align"].indexOf(b)?!0:!1;case "h4":return-1<d.indexOf(b)||-1<["align"].indexOf(b)?!0:!1;case "h5":return-1<d.indexOf(b)||-1<["align"].indexOf(b)?!0:!1;case "h6":return-1<d.indexOf(b)||
-1<["align"].indexOf(b)?!0:!1;case "hr":return-1<d.indexOf(b)||-1<["align","noshade","size","width"].indexOf(b)?!0:!1;case "i":return-1<d.indexOf(b)?!0:!1;case "img":return-1<d.indexOf(b)||-1<"align alt border height hspace ismap longdesc name src usemap vspace width".split(" ").indexOf(b)?!0:!1;case "ins":return-1<d.indexOf(b)||-1<["cite","datetime"].indexOf(b)?!0:!1;case "kbd":return-1<d.indexOf(b)?!0:!1;case "li":return-1<d.indexOf(b)||-1<["type","value"].indexOf(b)?!0:!1;case "map":return-1<Z.indexOf(b)||
-1<["name","title"].indexOf(b)?!0:!1;case "ol":return-1<d.indexOf(b)||-1<["compact","start","type"].indexOf(b)?!0:!1;case "p":return-1<d.indexOf(b)||-1<["align"].indexOf(b)?!0:!1;case "pre":return-1<d.indexOf(b)||-1<["width"].indexOf(b)?!0:!1;case "q":return-1<d.indexOf(b)||-1<["cite"].indexOf(b)?!0:!1;case "s":return-1<d.indexOf(b)?!0:!1;case "samp":return-1<d.indexOf(b)?!0:!1;case "small":return-1<d.indexOf(b)?!0:!1;case "span":return-1<d.indexOf(b)?!0:!1;case "strike":return-1<d.indexOf(b)?!0:
!1;case "strong":return-1<d.indexOf(b)?!0:!1;case "sub":return-1<d.indexOf(b)?!0:!1;case "sup":return-1<d.indexOf(b)?!0:!1;case "table":return-1<d.indexOf(b)||-1<"align bgcolor border cellpadding cellspacing summary width".split(" ").indexOf(b)?!0:!1;case "tbody":return-1<d.indexOf(b)||-1<B.indexOf(b)||-1<["valign"].indexOf(b)?!0:!1;case "td":return-1<d.indexOf(b)||-1<B.indexOf(b)||-1<"abbr bgcolor colspan height nowrap rowspan valign width".split(" ").indexOf(b)?!0:!1;case "tfoot":return-1<d.indexOf(b)||
-1<B.indexOf(b)||-1<["valign"].indexOf(b)?!0:!1;case "th":return-1<d.indexOf(b)||-1<B.indexOf(b)||-1<"abbr bgcolor colspan height nowrap rowspan valign width".split(" ").indexOf(b)?!0:!1;case "thead":return-1<d.indexOf(b)||-1<B.indexOf(b)||-1<["valign"].indexOf(b)?!0:!1;case "tr":return-1<d.indexOf(b)||-1<B.indexOf(b)||-1<["bgcolor","valign"].indexOf(b)?!0:!1;case "tt":return-1<d.indexOf(b)?!0:!1;case "u":return-1<d.indexOf(b)?!0:!1;case "ul":return-1<d.indexOf(b)||-1<["compact","type"].indexOf(b)?
!0:!1;case "var":return-1<d.indexOf(b)?!0:!1}}function v(a){a=a.toUpperCase();return-1==ja.indexOf(a)}function J(a){var b=a.nodeName,b=b.toUpperCase();return"INPUT"==b&&a.type&&"image"==a.type.toLowerCase()?"img":"BODY"==b||"HTML"==b||"FORM"==b?"div":"LABEL"==b?"span":"FIELDSET"==b?"div":"LEGEND"==b?"span":"IFRAME"==b||"EMBED"==b?"div":"CANVAS"==b||"VIDEO"==b?"img":"HIGHLIGHT"==b?"span":-1<ka.indexOf(b)?"div":v(b)?-1==la.indexOf(b)?"span":b.toLowerCase():b.toLowerCase()}function $(a){if(aa(a))if(F.length>=
T)log.warn("Hit style cap of "+T+" styles. Stopping.");else if(!a.cssRules&&a.href)y.push({href:a.href,owner:a.ownerNode}),G++,F.push(a.href),K.push(a.href),Browser.sendToExtension({name:"main_getTextResource",href:a.href});else{var b=a.cssRules,c=null;if(a.ownerNode&&a.ownerNode.dataset&&a.ownerNode.dataset.evernoteOriginatingUrl){var e=/(.+)\//.exec(a.ownerNode.dataset.evernoteOriginatingUrl);e&&(c=e[1])}for(e=0;e<b.length;e++)if(b[e].type==CSSRule.IMPORT_RULE){if(b[e].styleSheet){var d=b[e].styleSheet.href;
/^https?:\/\//.test(b[e].href)||/^\/\//.test(b[e].href)||c&&(d="/"===b[e].href[0]?c+b[e].href:c+"/"+b[e].href);-1==F.indexOf(d)&&(y.push({href:d,owner:a.ownerNode}),G++,F.push(d),K.push(d),Browser.sendToExtension({name:"main_getTextResource",href:d}))}}else b[e].type==CSSRule.MEDIA_RULE&&aa(b[e])&&y.push(b[e]);y.push(a)}}function ba(a,b,c){c=c.trim();a=c.match(/^http/i)?c:c.match(/^\//)?a.replace(/^(.*?:\/\/[^\/]+).*$/,"$1")+c:a.replace(/^(.*\/)/,"$1")+c;return"url('"+a+"')"}function ma(a,b){function c(){for(var a=
[d],b=0;b<arguments.length;b++)a.push(arguments[b]);return ba.apply(this,a)}var e=r.document.location.href.replace(/[^\/]+$/,""),d=b.replace(/[^\/]+$/,"");if(e==d)return a;a&&(a=a.replace(/url\(["']?(.*?)["']?\)/g,c));return a}function na(){C||(C=setInterval(function(){try{if(F.length>=T)C&&(clearInterval(C),C=0),U(D);else{var a=0;a:for(;a<L.length;a++)for(var b=L[a][0],c=L[a][1],e=0;e<r.document.styleSheets.length;e++){var d=r.document.styleSheets[e];if(d.ownerNode===b){y[c]=d;$(r.document.styleSheets[e]);
L.splice(a,1);G--;break a}}0==G&&(C&&(clearInterval(C),C=0),U(D))}}catch(H){A(null,H)}},100))}function aa(a){if(a.media&&a.media.length){for(var b=0;b<a.media.length;b++){var c=a.media[b].toLowerCase();if(c.match(/\bscreen\b/i)||c.match(/\ball\b/i))return!0}return!1}return!0}function U(a){setTimeout(function(){try{O=[];for(var b=0;b<y.length;b++){var c=y[b];if(c.cssRules)for(var e=0;e<c.cssRules.length;e++){var d=c.cssRules[e];d.selectorText&&d.selectorText.match(/(:?:before)|(:?:after)/)&&O.push(d)}}h=
[];h.push({element:a,string:"",i:0,after:null});x()}catch(H){A(null,H)}},300)}function V(a){return GlobalUtils.escapeXML(a)}function oa(a){return"string"==typeof a.id&&"movie_player"==a.id&&r.document.location.href.match(/v=(.*?)(&|$)/)?(a=r.document.location.href.match(/v=(.*?)(&|$)/)[1],'<a href="'+GlobalUtils.escapeXML(r.document.location.href)+'" target="_blank"><img src="http://img.youtube.com/vi/'+a+'/0.jpg"></img></a>'):""}function pa(a){try{if("application/x-shockwave-flash"===a.getAttribute("type")&&
a.getAttribute("flashvars")){var b=/iurlsd=(.+?)(&|$)/.exec(a.getAttribute("flashvars"));b||(b=/iurl=(.+?)(&|$)/.exec(a.getAttribute("flashvars")));b&&(a.style.backgroundImage="url("+decodeURIComponent(b[1])+")",a.style.backgroundPosition="50%",a.style.backgroundRepeat="no-repeat");if(b=/video_id=(.+?)(&|$)/.exec(a.getAttribute("flashvars"))){var c=document.createElement("a");c.href="https://www.youtube.com/watch?v="+b[1];c.target="_blank";c.style.display="block";c.style.width="100%";c.style.height=
"100%";a.appendChild(c)}}}catch(e){log.warn("problem with adding pic to embedded youtube video")}}function qa(a){if("iframe"!=a.nodeName.toLowerCase())return null;var b="";if(a.dataset&&a.dataset.en_id&&P&&P[a.dataset.en_id]){var b=P[a.dataset.en_id],c=W(a);a.width&&(c.map.width={value:a.width+"px"});a.height&&(c.map.height={value:a.height+"px"});c.map.position&&"static"!==c.map.position.value||(c.map.position={value:"relative"});a="";for(var e in c.map)a+=e+":"+c.map[e].value+";";a=a?' style="'+
M(a)+'"':"";return"<div"+a+">"+b+"</div>"}return null}function ra(a){if(a.parentNode&&a!=D){var b=a.parentNode.nodeName,b=b.toLowerCase();if("dl"==b&&(a=J(a),"dd"!=a&&"dt"!=a))return!1}return!0}function x(){ca++;if(0==ca%500)setTimeout(function(){try{x()}catch(a){A(null,a)}},25);else{var a=h[h.length-1];a||A("");if(0==a.i){if(!v(J(a.element))){h.pop();x();return}if(!ra(a.element)){log.warn('discarding invalid DL child "'+a.element.nodeName+'"');h.pop();x();return}if(k&&a.element!=k.commonAncestorContainer&&
!k.intersectsNode(a.element)){h.pop();x();return}if(k&&a.element===k.endContainer&&0===k.endOffset){h.pop();x();return}if(-1<"evernoteClipperResult evernoteAuthTools evernoteFilingTools evernoteGlobalTools evernoteUserTools evernoteShareTools evernoteEmailSharing evernoteOptionsPage evernoteClearlyArticle".split(" ").indexOf(a.element.id)){h.pop();x();return}var b=oa(a.element);if(b){a.string+=b;h.pop();h.length?(h[h.length-1].string=a.string,x()):A(a.string);return}if(b=qa(a.element)){a.string+=
b;h.pop();h.length?(h[h.length-1].string=a.string,x()):A(a.string);return}b={};I&&(pa(a.element),b="HIGHLIGHT"===a.element.nodeName?{style:' style="x-evernote:highlighted;background-color:#F6EE96;"'}:W(a.element),b.after&&(a.after=b.after));if(b.map&&b.map.display&&"none"==b.map.display.value){h.pop();x();return}var c=J(a.element);a.string+="<"+c;sa(a.element);if("CANVAS"==a.element.nodeName)try{a.string+=' src="'+a.element.toDataURL()+'"'}catch(e){}else"VIDEO"==a.element.nodeName&&a.element.poster&&
(a.string+=' src="'+GlobalUtils.escapeXML(a.element.poster)+'"');if(a.element.attributes&&a.element.attributes.length)for(a.i=0;a.i<a.element.attributes.length;a.i++)!z(c,a.element.attributes[a.i].name)||"VIDEO"==a.element.nodeName&&"src"==a.element.attributes[a.i].name||(a.string+=" "+ta(a.element,a.element.attributes[a.i]));I&&"map"!=c?a.string+=b.style:"HIGHLIGHT"==a.element.nodeName&&(a.string+=' style="x-evernote:highlighted;background-color:#F6EE96;"');a.string+=">";I&&b.before&&(a.string+=
b.before);a.i=0}for(;a.i<a.element.childNodes.length;){if(a.element.childNodes[a.i].nodeType==Node.TEXT_NODE)b=k&&a.element.childNodes[a.i]===k.startContainer?V(a.element.childNodes[a.i].textContent.substr(k.startOffset)):k&&a.element.childNodes[a.i]===k.endContainer?V(a.element.childNodes[a.i].textContent.substr(0,k.endOffset)):k&&!k.intersectsNode(a.element.childNodes[a.i])?"":V(a.element.childNodes[a.i].textContent),a.string+=b;else{if(b=a.element.childNodes[a.i].nodeType==Node.ELEMENT_NODE)b=
"VIDEO"==a.element.nodeName?!1:!0;if(b){h.push({element:a.element.childNodes[a.i],string:a.string,i:0,after:null});a.i++;x();return}}a.i++}I&&a.after&&(a.string+=a.after);a.string+="</"+J(a.element)+">";h.pop();h.length?(h[h.length-1].string=a.string,x()):A(a.string)}}function da(a){var b={};a=a.split(/;(?!.[^\(]+?\))\s*/);for(var c=0;c<a.length;c++)if(a[c]=a[c].trim(),a[c]){var e=a[c].indexOf(":"),d=a[c].substr(0,e).trim(),e=a[c].substr(e+1).trim();if(d&&e){for(var H=/(url\(.+?\))/g,l=H.exec(e),
p=e;l;){var m=l=l[1];/url\(.+?(data:.+?;.+?,.+?)\)/.test(m)&&(m="url("+/url\(.+?(data:.+?;.+?,.+?)\)/.exec(m)[1]+")");/url\(\/\/(.+?)\)/.test(m)&&(m="url(http://"+/url\(\/\/(.+?)\)/.exec(m)[1]+")");/url\((.+?)\)/.test(m)&&(m="url("+GlobalUtils.escapeXML(GlobalUtils.unescapeXML(/url\((.+?)\)/.exec(m)[1]))+")");p=p.replace(l,m);l=H.exec(e)}e=p;b[d.toLowerCase()]=e}}if(b["background-position"]&&b["background-repeat"]&&"0px 50%"==b["background-position"].trim()&&"initial initial"==b["background-repeat"].trim()){for(var h in b)h.match(/background/)&&
delete b[h];b.background="0"}return b}function ea(a){var b={};if(a.style.cssText){a.style.savedCssObj||(a.style.savedCssObj=da(a.style.cssText));a=a.style.savedCssObj;for(var c in a)b[c]=a[c]}return b}function sa(a){"img"==a.nodeName.toLowerCase()&&(a.attributes.width||a.setAttribute("width",a.width),a.attributes.height||a.setAttribute("height",a.height))}function ua(a){a.style&&(a.hasAttribute("background")&&(a.style.backgroundImage="url("+a.getAttribute("background")+")"),a.hasAttribute("bgcolor")&&
(a.style.backgroundColor=a.getAttribute("bgcolor")),a.hasAttribute("text")&&(a.style.color=a.getAttribute("text")))}function va(a){var b={ids:{regex:/#[A-Z]+/ig,count:0},classes:{regex:/\.[A-Z]+/ig,count:0},attrs:{regex:/\[.*?\]/g,count:0},pseudos:{regex:/:+[A-Z]+/ig,count:0},pseudoEls:{regex:/:+(first-line|first-letter|before|after)/ig,count:0},types:{regex:/(^|\s)[A-Z]+/ig,count:0}},c;for(c in b)for(var e=b[c].regex;e.exec(a);)b[c].count++;b.pseudoClasses={};b.pseudoClasses.count=b.pseudos.count-
b.pseudoEls.count;return 65536*b.ids.count+256*(b.classes.count+b.attrs.count+b.pseudoClasses.count)+(b.types.count+b.pseudoEls.count)}function wa(a){for(var b=[],c=0,e=0,d="",e=0;e<a.length;e++)d?a[e]==d&&(d=""):"'"==a[e]||'"'==a[e]?d=a[e]:","==a[e]&&(b.push(a.substring(c,e).trim()),c=e+1);b.push(a.substr(c).trim());return b}function xa(a,b){var c=a.nodeName.toLowerCase();"table"!=c&&"caption"!=c||"CSS1Compat"!=r.document.compatMode||(b["font-size"]={value:"inherit",score:0},b["font-weight"]={value:"inherit",
score:0},b["font-style"]={value:"inherit",score:0},b["font-variant"]={value:"inherit",score:0})}function E(a,b){"padding"==a?(delete b["padding-top"],delete b["padding-bottom"],delete b["padding-left"],delete b["padding-right"]):"margin"==a?(delete b["margin-top"],delete b["margin-bottom"],delete b["margin-left"],delete b["margin-right"]):"background"==a?(delete b["background-color"],delete b["background-position"],delete b["background-size"],delete b["background-repeat"],delete b["background-origin"],
delete b["background-clip"],delete b["background-attachment"],delete b["background-image"],E("background-position",b),E("background-repeat",b)):"background-position"==a?(delete b["background-position-x"],delete b["background-position-y"]):"background-repeat"==a?(delete b["background-repeat-x"],delete b["background-repeat-y"]):"border"==a?(delete b["border-width"],delete b["border-style"],delete b["border-color"],E("border-top",b),E("border-right",b),E("border-bottom",b),E("border-left",b)):"border-top"==
a?(delete b["border-top-width"],delete b["border-top-style"],delete b["border-top-color"]):"border-right"==a?(delete b["border-right-width"],delete b["border-right-style"],delete b["border-right-color"]):"border-bottom"==a?(delete b["border-bottom-width"],delete b["border-bottom-style"],delete b["border-bottom-color"]):"border-left"==a&&(delete b["border-left-width"],delete b["border-left-style"],delete b["border-left-color"])}function W(a,b){ua(a);var c="",e=null,d={},h={};a.attributes&&a.attributes.style&&
(e=da(a.attributes.style.value));var l={};xa(a,l);var p;if((p=r.getMatchedCSSRules(a))&&p.length)for(var m=0;m<p.length;m++){var t=0,f=!1;p[m].selectorText.match(/:visited/i)&&(f=!0);for(var g=wa(p[m].selectorText),k=0;k<g.length;k++){var u;try{u=a.webkitMatchesSelector(g[k])}catch(x){log.warn("Couldn't match against selector "+g[k]+" in: "+p[m].selectorText),log.exception(x)}if(u){var f=!1,s=va(g[k]);s>=t&&(t=s)}}if(!f){s=ea(p[m]);if(s["counter-reset"]&&(f=s["counter-reset"].split(/\s+/),0<f.length))for(g=
0;g<f.length;)/^\d+$/.test(f[g+1])?(w[f[g]]=parseInt(f[g+1]),g+=2):w[f[g++]]=0;if(s["counter-increment"]&&(f=s["counter-increment"].split(/\s+/),0<f.length))for(g=0;g<f.length;)w[f[g]]||(w[f[g]]=0),/^\d+$/.test(f[g+1])?(w[f[g]]+=parseInt(f[g+1]),g+=2):w[f[g++]]++;for(var n in s)f=n.replace(/^-/,"").replace(/-[a-z]/g,function(a){return a[1].toUpperCase()}),p[m].style[f]&&"counterIncrement"!==f&&"counterReset"!==f&&(f=0,l[n]&&(f=l[n].score),g=t,s[n].match(/!important\s*$/i)&&(g+=16777216,s[n]=s[n].replace(/\s*!important\s*$/i,
"")),g>=f&&(E(n,l),l[n]={value:s[n],score:g}))}}for(m=0;m<O.length;m++){u=O[m];var v;if(a.webkitMatchesSelector)try{v=a.webkitMatchesSelector(u.selectorText.replace(/(:?:before)|(:?:after)/g,""))}catch(z){}if(v){t=p=!1;u.selectorText.match(/:?:before/)&&(p=!0);u.selectorText.match(/:?:after/)&&(t=!0);for(n in l)p&&fa[n.toLowerCase()]&&(d[n]=l[n].value),t&&fa[n.toLowerCase()]&&(h[n]=l[n].value);u=ea(u);for(n in u)p&&(d[n]=u[n]),t&&(h[n]=u[n])}}p=[d,h];for(t=0;t<p.length;t++){u=p[t];var q=s="",y=0;
if(u["counter-reset"])for(f=u["counter-reset"].split(/\s+/),g=0;g<f.length;)/^\d+$/.test(f[g+1])?(w[f[g]]=parseInt(f[g+1]),g+=2):w[f[g++]]=0;if(u["counter-increment"])for(f=u["counter-increment"].split(/\s+/),g=0;g<f.length;)w[f[g]]||(w[f[g]]=0),/^\d+$/.test(f[g+1])?(w[f[g]]+=parseInt(f[g+1]),g+=2):w[f[g++]]++;for(k in u)"content"==k?(q=u[k],q=q.trim(),q=q.replace(/\s+!important$/,""),"none"==q&&(q='""'),q.match(/^'/)?q=q.replace(/^'(.*?)'.*/,"$1"):q.match(/^"/)&&(q=q.replace(/^"(.*?)".*/,"$1")),
q.match(/^url\((.*)\)/)?q="<img src='"+q.match(/^url\((.*)\)/)[1]+"'></img>":q.match(/^\s*counter\(.*?\)/)?(f=q.match(/^\s*counter\((.*?)\)/)[1].split(",")[0],"number"===typeof w[f]&&(q=GlobalUtils.escapeXML(""+w[f]))):q.match(/^\s*attr\((.*?)\)/)?(f=q.match(/^\s*attr\((.*?)\)/)[1],q=a.getAttribute(f)?GlobalUtils.escapeXML(""+a.getAttribute(f)):""):q.match(/^\s*-webkit-image-set\(.+\)/)&&(s+="background:"+q+";",q="")):"counter-reset"!==k&&"counter-increment"!==k&&(s+=k+":"+u[k]+";"),y++;y&&(s='<span style="'+
s+'">'+q+"</span>",0==t?d=s:h=s)}"string"!=typeof d&&(d=null);"string"!=typeof h&&(h=null);a==D&&(b=ga);if(b)for(m=0;m<b.length;m++)l[b[m]]&&delete l[b[m]];ya(a,l);za(l);if(e)for(n in k=/url\(['"]?(.*?)['"]?\)/i,e)k.test(e[n])&&(p=k.exec(e[n])[1],t=r.document.location.href,Q&&Q.href&&(t=Q.href),t=ba(t,v,p),e[n]=e[n].replace('url("'+p+'")',t).replace("url('"+p+"')",t).replace("url("+p+")",t)),l[n]={value:e[n]};for(m in l)c+=m+":"+l[m].value+";";c=c?' style="'+M(c)+'"':"";return{style:c,before:d,after:h,
map:l}}function ya(a,b){if(b.height&&b.height.value.match(/%$/)){var c=b.height.value;try{"fixed"!=r.getComputedStyle(a).position&&(r.getComputedStyle(a.parentNode).height||(c="auto"))}catch(e){}b.height.value=c}}function za(a){for(var b="-webkit-user-select -moz-user-select -ms-user-select user-select -webkit-user-modify -moz-user-modify -ms-user-modify user-modify".split(" "),c=0;c<b;c++)a[b[c]]&&delete a[b[c]]}function ta(a,b){var c=null;"href"==b.name.toLowerCase()?((c=a.href.animVal?a.href.animVal:
a.href)&&c.match(/^javascript/i)?c="#":/^https?:\/\//.test(c)||(c=a.baseURI+c),c=M(c)):"src"==b.name.toLowerCase()&&(c=a.src,""==b.value.trim()&&(c=""),c&&c.match(/^javascript/i)&&(c="#"),c=ha(a,c),c=M(c));null===c&&(c=M(b.value.replace(/\u000A/g,"")));return b.name+'="'+c+'"'}function ha(a,b,c){if(!a)return b;var e=r||window;if("IMG"==a.nodeName&&/^https?:\/\//i.test(b)&&!/\.gif($|\?)/i.test(b)&&(a.naturalWidth||a.naturalHeight))if(/^(https?:\/\/.[^\/]+)\/?/.exec(b)[1]===e.document.location.origin){e=
e.document.createElement("canvas");e.width=(c?a.naturalWidth:a.width)||1;e.height=(c?a.naturalHeight:a.height)||1;e.getContext("2d").drawImage(a,0,0,c?a.naturalWidth:a.width,c?a.naturalHeight:a.height);try{return/\.jpe?g$/.test(b)?e.toDataURL("image/jpeg"):e.toDataURL("image/png")}catch(d){if(18!=d.code)throw d;return b}finally{}}else return b;else return a.naturalWidth&&a.naturalHeight?b:""}function A(a,b){X=!1;if(!b){var c="",e="";if(I){for(var e=c="",d=D.parentNode;d&&d.parentNode;){var h=W(d,
ga).style,l=J(d);v(l)&&(c="<"+l+h+">"+c,e=e+"</"+l+">");d=d.parentNode}c='<div style="font-size: 16px">'+c;e+="</div>"}a=c+a+e}for(e=0;e<N.length;e++)N[e].parentNode.removeChild(N[e]);N=[];for(e=0;e<R.length;e++)try{R[e](a,b)}catch(k){log.warn("Couldn't run 'serialize' callback: "+k.stack||k.trace)}R=[]}function M(a){return a?GlobalUtils.escapeXML(a):""}var K=[],w={},G=0,y=[],D,k,I,R=[],N=[],ca=0,h=[],X=!1,O=[],P,r,Q=null,T=100,F=[],la="A ABBR ACRONYM ADDRESS AREA B BDO BIG BLOCKQUOTE BR CAPTION CENTER CITE CODE COL COLGROUP DD DEL DFN DIV DL DT EM FONT H1 H2 H3 H4 H5 H6 HR I IMG INS KBD LI MAP OL P PRE Q S SAMP SMALL SPAN STRIKE STRONG SUB SUP TABLE TBODY TD TFOOT TH THEAD TR TT U UL VAR".split(" "),
ka="ARTICLE ASIDE DETAILS FOOTER FIGURE FIGCAPTION HEADER HGROUP NAV SECTION SUMMARY".split(" "),ja="APPLET BASE BASEFONT BGSOUND BLINK BODY BUTTON DIR EMBED FIELDSET FORM FRAME FRAMESET HEAD HTML IFRAME ILAYER INPUT ISINDEX LABEL LAYER LEGEND LINK MARQUEE MENU META NOEMBED NOFRAMES NOSCRIPT OBJECT OPTGROUP OPTION PARAM PLAINTEXT SCRIPT SELECT STYLE TEXTAREA TITLE XML".split(" "),ia="id class accesskey data dynsrc tabindex style".split(" "),S=["style","title"],Z=["lang","xml:lang","dir"],Y=["accesskey",
"tabindex"],d=["style","title","lang","xml:lang","dir"],B=["align","char","charoff"],ga="border border-bottom border-bottom-color border-bottom-style border-bottom-width border-collapse border-color border-left border-left-color border-left-style border-left-width border-right border-right-color border-right-style border-right-width border-spacing border-style border-top border-top-color border-top-style border-top-width border-width bottom clear display float height layout-flow layout-grid layout-grid-char layout-grid-char-spacing layout-grid-line layout-grid-mode layout-grid-type left margin margin-bottom margin-left margin-right margin-top max-height max-width min-height min-width padding padding-bottom padding-left padding-right padding-top position right size table-layout top visibility width z-index".split(" ");
Browser.addMessageHandlers({content_textResource:function(a,b,c){try{var d=K.indexOf(a.href);if(-1==d){if(K.length)return}else K.splice(d,1);for(b=0;b<y.length;b++){var h=y[b];if(h.href===a.href){var k=ma(a.responseText,h.href),l=r.document.createElement("style");l.type="text/css";l.textContent=k;l.dataset.evernoteOriginatingUrl=h.href;a=[];for(k=0;k<r.document.styleSheets.length;k++)a.push(r.document.styleSheets[k]);h.owner?h.owner.parentNode.insertBefore(l,h.owner):r.document.head.appendChild(l);
N.push(l);L.push([l,b]);na();break}}}catch(p){A(null,p)}}});var L=[],C=0,fa={"border-collapse":!0,"border-spacing":!0,"caption-side":!0,color:!0,cursor:!0,direction:!0,"empty-cells":!0,"font-family":!0,"font-size":!0,"font-style":!0,"font-variant":!0,"font-weight":!0,font:!0,"letter-spacing":!0,"line-height":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,"list-style":!0,orphans:!0,quotes:!0,"text-align":!0,"text-indent":!0,"text-transform":!0,visibility:!0,"white-space":!0,
widows:!0,"word-spacing":!0};this.convertImgSrcToBase64IfPossible=ha;this.serialize=function(a,b,c,d,h,v){try{if((r=v)||(r=window),d&&R.push(d),X)log.warn("Called serialize while blocked. Added callback but won't change base element.");else{X=!0;D=a;k=b;I=c;P=h;G=0;F=[];w={};Q=document.getElementsByTagName("base")[0];for(a=0;a<r.document.styleSheets.length;a++)$(r.document.styleSheets[a]);0==G&&U(D)}}catch(l){A(null,l)}};Object.preventExtensions(this)}Object.preventExtensions(HtmlSerializer);
