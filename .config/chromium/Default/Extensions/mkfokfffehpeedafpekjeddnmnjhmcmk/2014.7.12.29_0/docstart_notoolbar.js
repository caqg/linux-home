var DOMCONTENTLOADED_EVENT="OnDOMContentLoaded";var BEGIN_NAV_EVENT="OnBeginNav";var END_NAV_EVENT="OnEndNav";var TAB_UPDATED="OnTabUpdated";var ALL_NAV_EVENTS="AllNavEvents";var _receivedBeginNav=false;var _firedBeginNav=false;var _receivedDOMContentLoaded=false;var _firedDOMContentLoaded=false;var _receivedEndNav=false;var _firedEndNav=false;var _receivedTabReplaced=false;var _firedFakeDOMContentLoaded=false;var _embedObject=null;var _maxCheckCounter=0;var _tabId=0;var _windowId=0;var _incognitoMode=0;var _windowType=0;var regexp=new RegExp(".(pdf)$","i");var _delayEvents=regexp.test(document.URL);if(false==_delayEvents){regexp=new RegExp("^(http|https)://www.divx.com/[a-z]|[a-z]-[a-z]/software/download/installed|(/chromium)","i");_delayEvents=regexp.test(document.URL)}function GetEmbedObject(c){var b=document.getElementById("cosymantecbfw");if((null==b)&&(true==c)){var a=document.createElement("object");a.setAttribute("type","{78CA3BF0-9C3B-40e1-B46D-38C877EF059A}");a.setAttribute("cotype","cs");a.setAttribute("id","cosymantecbfw");a.setAttribute("style","width: 0px; height: 0px; display: block;");b=document.documentElement.appendChild(a)}return b}function OnSubmit(a){var b=a?a.target:this;GetEmbedObject(true).Submit(b)}function AddSubmitHandler(){var a=document.forms;for(i=0;i<a.length;i++){a[i].addEventListener("submit",OnSubmit,false)}if(null!=document.body){document.body.addEventListener("submit",OnSubmit,false)}}function FireEvent(c,b){if((null==_embedObject)||(typeof _embedObject.TabId=="undefined")){if(true==_delayEvents){if((BEGIN_NAV_EVENT==c)||(DOMCONTENTLOADED_EVENT==c)||(TAB_UPDATED==c)){return}}InjectEmbedObject(20);return false}if((0==_tabId)||(0==_windowId)){return false}var d=false;var a=(window==window.top?true:false);if(BEGIN_NAV_EVENT==c){_receivedBeginNav=true;if(false==_firedBeginNav){_firedBeginNav=true;_embedObject.Nav(_windowId,_tabId,a,true);d=true}}else{if(DOMCONTENTLOADED_EVENT==c){FireEvent(BEGIN_NAV_EVENT,"");_receivedDOMContentLoaded=true;if(false==_firedDOMContentLoaded){_firedDOMContentLoaded=true;AddSubmitHandler();_embedObject.DOMContentLoaded(_windowId,_tabId,a);d=true}}else{if(END_NAV_EVENT==c){FireEvent(BEGIN_NAV_EVENT,"");FireEvent(DOMCONTENTLOADED_EVENT,"");_receivedEndNav=true;if(false==_firedEndNav){_firedEndNav=true;_embedObject.Nav(_windowId,_tabId,a,false);d=true}}else{if(TAB_UPDATED==c){if("complete"==b){FireEvent(ALL_NAV_EVENTS,"")}_embedObject.OnTabUpdated(_windowId,_tabId,b,document.URL.toString())}else{if(ALL_NAV_EVENTS==c){if(true==_receivedBeginNav){FireEvent(BEGIN_NAV_EVENT,"")}if(true==_receivedDOMContentLoaded){FireEvent(DOMCONTENTLOADED_EVENT,"")}if(true==_receivedEndNav){FireEvent(END_NAV_EVENT,"")}d=true}}}}}return d}function UpdateEmbedObject(){if((0==_tabId)||(0==_windowId)){return false}if(typeof _embedObject=="undefined"){_embedObject=GetEmbedObject(true);if(typeof _embedObject=="undefined"){return false}_embedObject.SetId(_windowId,_tabId,_incognitoMode,_windowType)}return true}function StartWndCheck(b,a){if(_maxCheckCounter>=6){return}if((0==_windowId)||(0==_tabId)){return}if((null==_embedObject)||(typeof _embedObject=="undefined")){return}if(!UpdateEmbedObject()){return}setTimeout(function(){var c=_embedObject.CheckWnd(_windowId,_tabId);if(true==c){setTimeout(function(){c=_embedObject.CheckWnd(_windowId,_tabId);if(true==c){return}},1000);return}_maxCheckCounter++;StartWndCheck(150,false)},b)}chrome.extension.onMessage.addListener(function(g,f,a){if(typeof g.type=="undefined"){return}var d=g.windowId;var e=g.tabId;if((0==e)||(0==d)){return}var c=g.type;var b=window==window.top;if((e!=_tabId)||(d!=_windowId)){_windowId=d;_tabId=e;_incognitoMode=g.incognitoMode;_windowType=g.windowType}if(!UpdateEmbedObject()){return}var h=true;if("onCheckTabWindow"==c){_maxCheckCounter=0;_embedObject.CheckWnd(_windowId,_tabId);h=false}else{if("onTabReplaced"==c){_receivedTabReplaced=true}else{if("onSelectionChanged"==c){_maxCheckCounter=0;h=false;if(true==_receivedTabReplaced){_receivedTabReplaced=false;setTimeout(function(){if((false==_receivedBeginNav)&&(false==_receivedDOMContentLoaded)){_firedFakeDOMContentLoaded=true;FireEvent(DOMCONTENTLOADED_EVENT,"")}},1000);setTimeout(function(){if(true==_firedFakeDOMContentLoaded){FireEvent(END_NAV_EVENT,"")}},500)}}else{if("onDOMContentLoaded"==c){_maxCheckCounter=0;h=FireEvent(DOMCONTENTLOADED_EVENT,"")}else{if("onCommitted"==c){_maxCheckCounter=0;h=FireEvent(BEGIN_NAV_EVENT,"")}else{if("onCompleted"==c){_maxCheckCounter=0;h=FireEvent(END_NAV_EVENT,"")}else{if(("onUpdated"==c)&&(typeof g.status!="undefined")&&(true==b)){if("complete"==g.status){_maxCheckCounter=0;h=true}FireEvent(TAB_UPDATED,g.status)}else{h=false}}}}}}}if(true==h){StartWndCheck(250,false)}});function ProcessNavStart(){if(0==_tabId){chrome.extension.sendMessage({contentscript:"GetTabInfo"},function(a){_windowId=a.windowId;_tabId=a.tabId;_incognitoMode=a.incognitoMode;_windowType=a.windowType;_embedObject.SetId(_windowId,_tabId,_incognitoMode,_windowType);ProcessNavStart()})}else{FireEvent(ALL_NAV_EVENTS,"")}}function InjectEmbedObject(b){if(0==b){return}if(null==_embedObject){_embedObject=GetEmbedObject(true)}if((null==_embedObject)||(typeof _embedObject.TabId=="undefined")){if(null!=_embedObject){document.documentElement.removeChild(_embedObject);_embedObject=null}var a=(1==b?1000:100);setTimeout(function(){b--;InjectEmbedObject(b)},a)}else{if((0!=_windowId)&&(0!=_tabId)){_embedObject.SetId(_windowId,_tabId,_incognitoMode,_windowType);FireEvent(ALL_NAV_EVENTS,"")}}}document.addEventListener("DOMContentLoaded",function(){FireEvent(DOMCONTENTLOADED_EVENT,"")});if(false==_delayEvents){InjectEmbedObject(20)};