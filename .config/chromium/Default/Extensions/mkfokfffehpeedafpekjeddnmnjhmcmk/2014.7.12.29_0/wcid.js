function wcidInit(c){if((typeof c=="undefined")||(false==c)){return}var b=getFrameId();var a=wcidGetDOM();chrome.runtime.sendMessage({method:"ContentData",windowId:_windowId,tabId:_tabId,contentOrigin:"wcid",sourceData:a,documentURL:document.URL.toString(),collectionData:undefined,fid:b});return}function WCIDCollect(){var s="T";var b="G";var y="I";var i="B";var d="C";var A="R";var u="S";var q="L";var z="F";var f="n";function l(){this.separator=String.fromCharCode(1);this.output=new Array();this.backgroundImages=new Array();this.backgroundImage="";this.bodyHTML="";this.bodyText="";this.buttonText=new Array();this.comments=new Array();this.forms=new Array();this.frames=new Array();this.iFrames=new Array();this.inputs=new Array();this.images=new Array();this.linkTags=new Array();this.areaTags=new Array();this.aTags=new Array();this.pageSignature="";this.referrer="";this.scripts=new Array();this.title="";this.url="";this.hasFlash=false;this.numPTags=0;this.numVisiblePTags=0;this.numBRTags=0;this.numTRTags=0;this.numSelects=0;this.lastChar="";this.lastCharCount=0;this.numElements=0;this.sig=new Array();this.tags=new Array();this.startTime=0;this.maxTime=0;this.isTimedOut=false;function C(){return new Date().getTime()}function L(O){this.startTime=C();this.maxTime=this.startTime+O}function N(){if(!this.isTimedOut){this.isTimedOut=(C()>this.maxTime)}return this.isTimedOut}function M(O){if((null==O)||(O.length==0)){this.output.push("S0");this.output.push("")}else{this.output.push("S"+O.length);this.output.push(O)}}function E(O){if(null==O){this.output.push("#0")}else{this.output.push("#"+O)}}function H(O,P){this.AddGroup(O);this.AddText(P)}function J(P,O){this.AddGroup(P);this.AddNum(O)}function F(Q,O){this.AddGroup(Q);this.AddNum(O.length);for(var P=0;P<O.length;P++){this.AddText(O[P])}}function G(Q,P){this.AddGroup(Q);this.AddNum(P.length);for(var O=0;O<P.length;O++){P[O].AddOutput(this)}}function K(O){if(this.lastChar==O){this.lastCharCount++}else{if(this.lastCharCount==1){this.sig.push(this.lastChar)}else{if(this.lastCharCount>1){this.sig.push(this.lastCharCount+"");this.sig.push(this.lastChar)}}this.lastChar=O;this.lastCharCount=1}}function I(){this.AddSig("*");this.pageSignature=this.sig.join("");if(true==this.hasFlash){this.AddGroupNum("FLAS",1)}else{this.AddGroupNum("FLAS",0)}this.AddGroupNum("PTAG",this.numPTags);this.AddGroupNum("VPTG",this.numVisiblePTags);this.AddGroupNum("BRTG",this.numBRTags);this.AddGroupNum("TRTG",this.numTRTags);this.AddGroupNum("NSEL",this.numSelects);this.AddGroupNum("NELM",this.numElements);this.AddGroupString("IMAG",this.backgroundImage);this.AddGroupStrings("BIMG",this.backgroundImages);this.AddGroupString("BHTM",this.bodyHTML);this.AddGroupString("BODY",this.bodyText);this.AddGroupStrings("BTXT",this.buttonText);this.AddGroupStrings("COMT",this.comments);this.AddGroupObjects("FRMS",this.forms);this.AddGroupStrings("FAMS",this.frames);this.AddGroupStrings("IFMS",this.iFrames);this.AddGroupObjects("INPS",this.inputs);this.AddGroupObjects("IMGS",this.images);this.AddGroupObjects("LTGS",this.linkTags);this.AddGroupObjects("ARTG",this.areaTags);this.AddGroupObjects("ATGS",this.aTags);this.AddGroupString("PSIG",this.pageSignature);this.AddGroupString("HIST",this.referrer);this.AddGroupObjects("SCPS",this.scripts);this.AddGroupString("TITL",this.title);this.AddGroupString("URL ",this.url);this.AddGroupStrings("TAGS",this.tags);this.AddText("Done")}function D(){var O="`";return this.output.join(O)}this.AddSig=K;this.AddGroup=M;this.ToString=D;this.EndPage=I;this.AddNum=E;this.AddText=M;this.AddGroupNum=J;this.AddGroupString=H;this.AddGroupStrings=F;this.AddGroupObjects=G;this.SetMaxTime=L;this.TimedOut=N}function n(D,C){if((D!=null)&&(D.getAttribute!=null)){return D.getAttribute(C)}return null}function r(E,D,C){var F=n(E,D);if(F!=null){return parseInt(F)}return C}function t(C){if((C!=null)&&(C!=undefined)){var D=C.innerText;if(D.length>0){return D}}return null}function B(C,E){var D=t(C);if(D!=null){E.push(D)}}function o(D,E,F){var C=n(D,E);if((C!=null)&&(C.length>0)){F.push(C);return C}return null}function h(){function D(E){if(null!=E){this.name=E.name;this.value=E.value;this.type=E.type;return(this.name!=null)||(this.value!=null)||(this.type!=null)}return false}function C(E){E.AddGroup("INPT");E.AddText(this.name);E.AddText(this.value);E.AddText(this.type)}this.Parse=D;this.AddOutput=C}function p(){function D(E){if(E!=null){this.language=E.getAttribute("language");this.src=E.getAttribute("src");this.text=E.text;return true}return false}function C(E){E.AddGroup("SCRT");E.AddText(this.language);E.AddText(this.src);E.AddText(this.text)}this.Parse=D;this.AddOutput=C}function m(){this.width=0;this.height=0;function D(F){if(F!=null){this.src=n(F,"src");this.width=r(F,"width",0);this.height=r(F,"height",0);if((this.src!=null)&&(this.src.length>0)){var E=F.getBoundingClientRect();if(0==this.width){this.width=Math.floor(E.width)}if(0==this.height){this.height=Math.floor(E.height)}return true}}return false}function C(E){E.AddGroup("IMAG");E.AddText(this.src);E.AddNum(this.width);E.AddNum(this.height)}this.Parse=D;this.AddOutput=C}function w(){function C(E){if(E!=null){this.href=E.href;this.rel=E.rel;this.text=t(E);return true}return false}function D(E){E.AddGroup("LINK");E.AddText(this.href);E.AddText(this.rel);E.AddText(this.text)}this.Parse=C;this.AddOutput=D}function j(){function C(E){if(E!=null){this.src=E.src;return(this.src!=null)&&(this.src.length>0)}return false}function D(E){E.AddGroup("FRAM");E.AddText(this.src)}this.Parse=C;this.AddOutput=D}function k(){this.inputs=new Array();this.options=new Array();this.numSelect=0;this.numTextArea=0;this.formAction=null;function D(G,J){this.formAction=G.getAttribute("action");var I=G.elements.length;if(I>J){I=J}for(var H=0;H<I;H++){var F=G.elements[H];if(F){switch(F.tagName.toUpperCase()){case"INPUT":var E=new h();if(E.Parse(F)){this.inputs.push(E)}break;case"SELECT":this.numSelect++;break;case"TEXTAREA":this.numTextArea++;break}}else{return false}}return true}function C(F){F.AddGroup("FORM");F.AddText(this.formAction);F.AddNum(this.numSelect);F.AddNum(this.numTextArea);F.AddNum(this.inputs.length);for(var E=0;E<this.inputs.length;E++){this.inputs[E].AddOutput(F)}}this.Parse=D;this.AddOutput=C}function a(E,D){var C=0;if((E!=null)&&(E!=undefined)){C=E.length;if(E.length>D){C=D}}return C}function g(E,D){if((E==null)||(D==null)){return}D.tags.push(E.tagName);switch(E.tagName){case"BODY":background=o(E,"background",D.backgroundImages);if(background!=null){D.backgroundImage=background}break;case"OBJECT":if(-1!=E.innerHTML.search(/.swf/i)){D.hasFlash=true}break;case"P":D.numPTags++;if(E.innerHTML.length>0){D.numVisiblePTags++}D.AddSig(f);break;case"BR":D.numBRTags++;D.AddSig(f);break;case"TR":D.numTRTags++;D.AddSig(f);break;case"TABLE":o(E,"background",D.backgroundImages);break;case"TD":o(E,"background",D.backgroundImages);D.AddSig(f);break;case"INPUT":var C=new h();if(C.Parse(E)){D.inputs.push(C);switch(C.type.toLowerCase()){case"text":case"password":case"hidden":D.AddSig(y);break;case"button":case"submit":case"reset":D.AddSig(i);break;case"checkbox":D.AddSig(d);break;case"radio":D.AddSig(A);break;case"image":D.AddSig(b);break;case"file":D.AddSig(z);break;default:D.AddSig(y);break}}break;case"SELECT":D.AddSig(u);D.numSelects++;break;case"TEXTAREA":D.AddSig(y);D.numTextAreas++;break;case"FRAME":o(E,"src",D.frames);break;case"IFRAME":o(E,"src",D.iFrames);break;case"BUTTON":B(E,D.buttonText);break;case"IMG":var F=new m();if(F.Parse(E)){D.images.push(F);if((F.width>1)||(F.height>1)){D.AddSig(b)}}break;case"HR":case"UL":case"LI":case"CO":case"OL":case"DIV":D.AddSig(f);break}}function x(G,E,D,J,C){var K=G.getElementsByTagName(D);var I=a(K,J);for(var F=0;(F<I)&&!l.isTimedOut;F++){if(0==(F%10)){if(C.TimedOut()){break}}var H=new w();if(H.Parse(K[F])){E.push(H)}}}function v(F,E,C,G){if(0==(C%10)){if(E.TimedOut()){return C}}if(C<=G){switch(F.nodeType){case Node.COMMENT_NODE:C++;E.comments.push(F.nodeValue);break;case Node.ELEMENT_NODE:C++;if(C<G){g(F,E)}break}for(var D=0;(D<F.childNodes.length)&&!l.isTimedOut;D++){C=v(F.childNodes[D],E,C,G)}}return C}function c(I,O){var T=I[0];var V=I[1];var P=I[2];var U=I[3];var R=I[4];var C=I[5];O.SetMaxTime(I[6]);var M=document.forms;var K=a(M,T);for(var L=0;(L<K)&&!O.TimedOut();L++){var E=new k();if(E.Parse(M[L],V)){O.forms.push(E)}}if(!O.isTimedOut){O.title=document.title;O.referrer=document.referrer;O.url=document.URL;var D=document.body;if(D!=null){O.bodyText=t(D);if(!O.TimedOut()){O.bodyHTML=D.outerHTML}}}var H=document.childNodes;var S=0;for(var G=0;(G<H.length)&&!O.TimedOut();G++){var F=H[G];S=v(F,O,S,C)}O.numElements=S;var J=document.scripts;var Q=a(J,U);for(var N=0;(N<Q)&&!O.TimedOut();N++){var W=new p();if(W.Parse(J[N])){O.scripts.push(W)}}x(document,O.linkTags,"LINK",R,O);x(document,O.aTags,"A",R,O);x(document,O.areaTags,"AREA",R,O)}function e(C){var D=new l();c(C,D);D.EndPage();return D.ToString()}this.Parse=e}function wcidGetDOM(){var b=new Array();b[0]=50;b[1]=1500;b[2]=500;b[3]=50;b[4]=500;b[5]=5000;b[6]=1000;var c=new WCIDCollect();var a=c.Parse(b);return a};