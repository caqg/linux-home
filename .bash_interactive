# -*- Shell-Script -*-

case $(whoami) in
root)
    export PS1='# ' ;;
*)
    export PS1='$ ' ;;
esac

case "${TERM}" in
xterm*|rxvt*)
    function updatePS1WithGitBranch {
        left='\[\e]0;\u@\h: \w'
        middle=$(git branch 2>/dev/null | sed -e '/^ /d' -e 's/^..\(.*\)/ git:\1/')
        right='\a\]\$ '
        PS1="$left$middle$right"
    }

    PROMPT_COMMAND=updatePS1WithGitBranch
    ;;
esac

# export PS2='> '
# export PS3='? '
# export PS4='+ '

set -o ignoreeof
shopt -s cdspell
shopt -s globstar

function +    { pushd "$@"; }
function -    { popd "$@"; }
function =    { dirs -v "$@"; }

function 2top { cd $(git rev-parse --show-toplevel); }

function dir  { LC_ALL=C /bin/dir -F "$@"; }
function h    { history "$@"; }
function hf   { if [ $# -gt 0 ]; then history | grep -e "$*" -; else history; fi; }
function j    { jobs "$@"; }
function k    { kill -9 "$@"; }
function l    { LC_ALL=C /bin/ls -Alh --time-style=iso --group-directories-first "$@"; }
function lt   { LC_ALL=C /bin/ls -Altrh --time-style=iso "$@"; }
function v    { gview -M -; }
function vdir { LC_ALL=C /bin/vdir "$@"; }
function vf   { ~/cmd/e -nc "$@"; }

##end .bash_interactive
